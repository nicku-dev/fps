<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <record id="freight_order_tree_view" model="ir.ui.view">
        <field name="name">Freight Order</field>
        <field name="model">freight.order</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="FO Number"/>
                <field name="vehicle_id" string="Kapal"/>
                <!-- <field name="shippment_type"/> -->
                <field name="koordinator_kapal_id" string="Koordinator Kapal"/>
                <field name="shipper_id"/>
                <field name="departure_time"/>
                <field name="arrival_time"/>
                <field name="state" 
                    decoration-success="state == 'done'"
                    decoration-info="state == 'submit'"
                    decoration-warning="state == 'cancel'"
                    optional="show" readonly="1" widget="badge"/>
            </tree>
        </field>
    </record>

    <!-- <record id="view_freight_order_filter" model="ir.ui.view">
        <field name="name">freight.order.search</field>
        <field name="model">freight.order</field>
        <field name="arch" type="xml">
            <search>
                <filter string="Agent" name="Agent" domain="[('agent_id','=',False)]"/>
            </search>
            </field>
    </record> -->

    <record id="freight_order_form_view" model="ir.ui.view">
        <field name="name">Freight Order</field>
        <field name="model">freight.order</field>
        <field name="arch" type="xml">
                <form>
                    <header>
                        <!-- <button name="create_custom_clearance" string="Custom Clearance" type="object" class="oe_highlight"
                                data-hotkey="w" attrs="{'invisible': [('clearance', '=', True)]}"/> -->
                        <button name="action_submit" string="Submit" type="object" class="oe_highlight"
                                data-hotkey="w" states="draft"/>
                        <button name="action_confirm" string="Confirm" type="object" class="oe_highlight"
                                data-hotkey="w" states="submit"/>
                        <!-- <button name="create_invoice" string="Invoice" type="object" class="oe_highlight" states="confirm"
                                data-hotkey="w"/> -->
                        <!-- <button name="track_order" string="Tracking" type="object" class="oe_highlight" states="confirm,invoice"
                                data-hotkey="w"/> -->
                        <button name="action_done" string="Done" type="object" class="oe_highlight" states="confirm,invoice"
                                data-hotkey="w"/>
                        <button name="action_cancel" string="Cancel" type="object" states="draft,submit,confirm,invoice"
                                data-hotkey="w"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,submit,confirm" readonly="1"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="get_invoice"
                                icon="fa-pencil-square-o">
                                <field string="Invoice" name="invoice_count" widget="statinfo"/>
                            </button>
                            <button class="oe_stat_button" type="object" name="get_so_related"
                                icon="fa-pencil-square-o">
                                <field string="Sales Order" name="so_count" widget="statinfo"/>
                            </button>   

                            <!-- attrs="{'invisible':[('line_count', '=', 0)]}" -->
                            <button class="oe_stat_button" type="object" name="get_sol_related"
                                icon="fa-list">
                                <field name="line_count" widget="statinfo" string="Lines" />
                            </button>                         
                        </div>
                        <div class="oe_title">
                            <h1 class="mt0" >
                                <field name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="shippment_type"/>
                                <field name="shipper_id"/>
                                <field name="vehicle_id"/>
                                <field name="order_date" string="Order Kapal"/>
                                <field name="departure_time"/>
                                <field name="arrival_time"/>
                                <field name="koordinator_kapal_id" string="Koordinator Kapal"/>
                                <field name="fo_region_id" string="Region"/>
                            </group>
                            <group>
                                <field name="create_date"/>
                                <field name="agent_id"/>
                                <field name="consignee_id"/>
                                <field name="expected_date"/>
                                <!-- <field name="route_id"/> -->
                            </group>
                        </group>
                        <notebook>
                            <page string="Carriage">
                                <field name="sol_ids">
                                <!-- editable="bottom" -->
                                    <tree string="S.O.L">
                                        <field name="order_id"/>
                                        <field name="name"/>
                                        <field name="order_partner_id"/>
                                        <field name="product_uom_qty"/>
                                        <field name="qty_bill_lading"/>
                                        <field name="qty_difference"/>
                                        <field name="qty_delivered"/>
                                        <field name="price_unit"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="freight_timesheet" string="Timesheet">
                                <field name="timesheet_ids">
                                    <tree string="Timesheet">
                                        <field name="date"/>
                                        <field name="timesheet_datetime"/>
                                        <field name="timesheet_activity"/>
                                        <field name="qty_cumulative"/>
                                        <field name="qty_daily_rate"/>
                                        <field name="load"/>
                                        <field name="keterangan"/>
                                    </tree>
                                </field>
                            </page>

                            <!-- <page name="freight_carriage" string="Carriage">
                                <field name="carriage_ids">
                                    <tree string="Carriage">
                                        <field name="carriage_so"/>
                                        <field name="load"/>
                                        <field name="qty_so"/>
                                        <field name="qty_bl"/>
                                        <field name="qty_final"/>
                                        <field name="qty_difference"/>
                                        <field name="uom"/>
                                        <field name="toleransi_claim"/>
                                        <field name="claim_susut"/>
                                    </tree>
                                </field>
                            </page> -->

                        </notebook>
                    </sheet>
                </form>
        </field>
    </record>

    <record id="action_freight_order" model="ir.actions.act_window">
        <field name="name">Freight Order</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">freight.order</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            Define a new freight order
            </p>
        </field>

    </record>
</odoo>


<!-- 
                            <page name="freight_costing" string="Costing">
                                <field name="costing_ids">
                                    <tree>
                                        <field name="fo_vendor_bill"/>
                                        <field name="vendor"/>
                                        <field name="product"/>
                                        <field name="keterangan"/>
                                        <field name="qty_user"/>
                                        <field name="uom"/>
                                        <field name="price_unit"/>
                                        <field name="taxes"/>
                                        <field name="total"/>
                                    </tree>
                                </field>
                            </page> -->

                            <!-- <page name="freight_costing" string="Profitability">
                                <field name="profitability_ids">
                                    <tree>
                                        <field name="invoice"/>
                                        <field name="customer_fo"/>
                                        <field name="product_fo"/>
                                        <field name="keterangan"/>
                                        <field name="uom"/>
                                        <field name="price_unit"/>
                                        <field name="taxes"/>
                                        <field name="total"/>
                                    </tree>
                                </field>
                            </page> -->

                            <!-- TEST BILL DI ASSET-->
                            <!-- <page string="Bills" name="related_items">
                                <field name="original_move_line_ids" domain="[('parent_state', '=', 'posted'), ('company_id', '=', company_id), ('account_id.account_type', 'in', ('asset_fixed', 'asset_non_current', 'asset_current')), ('move_id.move_type', 'in', ('in_invoice', 'in_refund', 'in_receipt', 'entry')), ('move_id.asset_id', '=', False),]" class="original_move_line_ids_field" context="{'disable_preview': 1, 'tree_view_ref': 'account_asset.view_move_line_tree_asset'}" on_change="1" modifiers="{&quot;readonly&quot;: [[&quot;state&quot;, &quot;=&quot;, &quot;posted&quot;]]}" can_create="true" can_write="true">
                                    <tree create="0" no_open="1">
                                        <field name="date" modifiers="{&quot;readonly&quot;: true}"/>
                                        <field name="move_name" string="Journal Entry" widget="open_move_widget" modifiers="{&quot;readonly&quot;: true}"/>
                                        <field name="account_id" on_change="1"/>
                                        <field name="vehicle_id" optional="hidden"/>
                                        <field name="name" on_change="1"/>
                                        <field name="debit" widget="monetary" on_change="1"/>
                                        <field name="credit" widget="monetary" on_change="1"/>
                                        <field name="company_currency_id" modifiers="{&quot;readonly&quot;: true, &quot;column_invisible&quot;: true}"/>
                                    </tree>
                                </field>
                            </page> -->